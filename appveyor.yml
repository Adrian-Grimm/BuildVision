version: 1.5.0.{build}
configuration: Release
os: Visual Studio 2017
skip_tags: true

branches:
  only:
    - master
    - dev

before_build:
  - nuget restore
  - ps: .\bump-version.ps1

build:
  verbosity: minimal

artifacts:
  - path: BuildVision\bin\Release\BuildVision.vsix

deploy:
  - provider: GitHub
    tag: v$(appveyor_build_version)
    release: v$(appveyor_build_version)
    auth_token:
      secure: 7tnXVDiH/SFCiysgula8OgEFGUUp4nVUU1RLnPhBuZaph/7nW6sFQ9UFOFedJM5Q
    artifact: BuildVision\bin\Release\BuildVision.vsix
    draft: true
    prerelease: true